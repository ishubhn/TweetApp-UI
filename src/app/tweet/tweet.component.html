<div class="container pt-3 border border-dark rounded">
    <div class="fs-6 fw-bold">
        <fa-icon class="fa-lg" [icon]="faTwitter"></fa-icon>
        <!-- Add user name -->
        <span class="px-2">{{user.firstName}} {{user.lastName}}</span>
        <span class="text-muted d-inline-block fs-6">{{tweet.email}}</span>
        <span class="float-end timestamp">| {{tweet.timestamp | date}}</span>
    </div>
    <div class="text-wrap py-2 ps-3 ms-5 me-2 mt-2 blockquote" *ngIf="!isUpdate else input">
        {{tweet.body}}
    </div>
    <ng-template class="py-2 ps-3 ms-5 me-2 mt-2" #input>
        <div class="p-auto">
            <form #f="ngForm" (ngSubmit)="updateTweet(f)">
                <div class="form-floating mt-3 mx-3">
                    <textarea class="form-control" placeholder="What's on your mind?" name="body" #body="ngModel"
                        ngModel (keydown)="keyup(body)" id="tweet" style="height: 100px" minlength="1"
                        maxlength="144"></textarea>
                    <label for="tweet">What's happening?</label>
                </div>
                <div class="mt-3 mx-5 d-inline-block text-muted">
                    <p>{{tweetLength}}/144</p>
                </div>
                <div class="mt-3 float-end">
                    <button class="btn btn-secondary-outline" (click)="toggleUpdate()">Cancel</button>
                    <!-- <button type="submit" class="btn btn-primary ps-2" [disabled]="!g.valid">Update</button> -->
                    <button type="submit" class="btn btn-primary">Update</button>
                </div>
            </form>
        </div>
    </ng-template>
    <div class="ps-5 d-flex flex-row bd-highlight mb-3">
        <div class="p-3 bd-highlight">
            <fa-icon [class]="likeClass" (mouseover)="likeClass='fa-lg like'" (mouseout)="likeClass=''"
                (click)="addLike()" class="icon" [icon]="faLikeEmpty" *ngIf="tweet.likes==0"></fa-icon>
            <fa-icon [class]="likeClass" (mouseover)="likeClass='fa-lg like'" (mouseout)="likeClass=''"
                (click)="addLike()" class="liked-tweet" [icon]="faLike" *ngIf="tweet.likes>0"></fa-icon>
            <span class="ms-2" *ngIf="tweet.likes>0">{{tweet.likes}}</span>
        </div>
        <div class="p-3 ps-5 bd-highlight">
            <fa-icon [class]="retweetClass" (mouseover)="retweetClass='fa-lg retweet'" (mouseout)="retweetClass=''"
                class="icon" [icon]="faReply"></fa-icon>
        </div>
        <div class="p-3 ps-5 bd-highlight" *ngIf="tweet.email == loggedInUser">
            <fa-icon [class]="deleteClass" (mouseover)="deleteClass='fa-lg delete'" (mouseout)="deleteClass=''"
                (click)="deleteTweet()" class="icon" [icon]="faDelete"></fa-icon>
        </div>
        <div class="p-3 ps-5 bd-highlight" *ngIf="tweet.email == loggedInUser">
            <fa-icon [class]="updateClass" (mouseover)="updateClass='fa-lg update'" (mouseout)="updateClass=''"
                class="icon" [icon]="faUpdate" (click)="toggleUpdate()"></fa-icon>
        </div>
    </div>
</div>